{"ast":null,"code":"import _defineProperty from \"/Users/bengrzybowski/sei/week8/project3/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/bengrzybowski/sei/week8/project3/client/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport './App.css';\nimport { getData } from './services/api-helper';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport { Route, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport RegisterForm from './components/RegisterForm';\nimport LoginForm from './components/LoginForm';\nimport GiftListDetails from './components/GiftListDetails';\nimport CreateGiftListForm from './components/CreateGiftListForm';\nimport UpdateGiftListForm from './components/UpdateGiftListForm';\nimport { registerUser, loginUser, verifyUser, getGiftListsByUser, postGiftList, putGiftList, deleteGiftList } from './services/api-helper';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: null,\n      authErrorMessage: \"\",\n      giftLists: [],\n      giftListFormData: {\n        title: \"\",\n        description: \"\",\n        image_link: \"\",\n        due_date: \"\"\n      },\n      giftFormData: {\n        item: \"\",\n        description: \"\",\n        image_link: \"\",\n        price: \"\",\n        location: \"\",\n        proposed_purchase_date: \"\",\n        actual_purchase_date: \"\"\n      }\n    };\n\n    this.handleLogin = async loginData => {\n      const currentUser = await loginUser(loginData);\n\n      if (currentUser.error) {\n        this.setState({\n          authErrorMessage: currentUser.error\n        });\n      } else {\n        this.setState({\n          currentUser\n        });\n        await this.getGiftLists();\n        this.props.history.push('./');\n      }\n    };\n\n    this.handleRegister = async registerData => {\n      const currentUser = await registerUser(registerData);\n\n      if (currentUser.error) {\n        this.setState({\n          authErrorMessage: currentUser.error\n        });\n      } else {\n        this.setState({\n          currentUser\n        });\n        this.props.history.push('./');\n      }\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        currentUser: null\n      });\n      localStorage.removeItem('authToken');\n      this.setState({\n        currentUser: null,\n        authErrorMessage: \"\",\n        giftLists: []\n      });\n    };\n\n    this.handleVerify = async () => {\n      const currentUser = await verifyUser();\n      if (currentUser) this.setState({\n        currentUser\n      });\n    };\n\n    this.getGiftLists = async () => {\n      if (this.state.currentUser) {\n        const giftLists = await getGiftListsByUser(this.state.currentUser.id);\n        this.setState({\n          giftLists\n        });\n      } else {\n        this.setState({\n          giftLists: []\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      this.setState(prevState => ({\n        giftListFormData: _objectSpread({}, prevState.giftListFormData, {\n          [name]: value\n        })\n      }));\n    };\n\n    this.createGiftList = async userId => {\n      const newGiftLists = await postGiftList(userId, this.state.giftListFormData);\n      this.setState(prevState => ({\n        giftLists: [...prevState.giftLists, newGiftLists]\n      }));\n      this.props.history.push('./');\n    };\n\n    this.updateGiftList = async (id, giftlist) => {\n      const newGiftLists = await putGiftList(id, giftlist);\n      this.setState(prevState => ({\n        giftLists: [...prevState.giftLists, newGiftLists]\n      }));\n      this.props.history.push('../');\n    };\n\n    this.deleteGiftList = async id => {\n      const ret = await deleteGiftList(id);\n      this.setState(prevState => ({\n        giftLists: prevState.giftLists.filter(giftList => {\n          return giftList.id !== id;\n        })\n      }));\n      this.props.history.push('../');\n    };\n\n    this.createGift = async userId => {\n      const newGiftLists = await postGiftList(userId, this.state.giftListFormData);\n      this.setState(prevState => ({\n        giftLists: [...prevState.giftLists, newGiftLists]\n      }));\n      this.props.history.push('./');\n    };\n\n    this.componentDidMount = async () => {\n      console.log(\"component did mount ran.\");\n      await this.handleVerify();\n      await this.getGiftLists();\n    };\n  }\n\n  render() {\n    const currentUser = this.state.currentUser;\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Header, {\n      currentUser: currentUser,\n      handleLogout: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Home, {\n        giftLists: this.state.giftLists,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: () => React.createElement(LoginForm, {\n        handleLogin: this.handleLogin,\n        authErrorMessage: this.state.authErrorMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      render: () => React.createElement(RegisterForm, {\n        handleRegister: this.handleRegister,\n        authErrorMessage: this.state.authErrorMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/giftLists/:id\",\n      render: props => {\n        const id = props.match.params.id;\n        const currentGiftList = this.state.giftLists.find(gl => {\n          return gl.id === parseInt(id);\n        });\n        return React.createElement(GiftListDetails, {\n          currentGiftList: currentGiftList,\n          deleteGiftList: this.deleteGiftList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/create_giftLists\",\n      render: () => React.createElement(CreateGiftListForm, {\n        createGiftList: this.createGiftList,\n        handleChange: this.handleChange,\n        currentUser: currentUser,\n        giftListFormData: this.state.giftListFormData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/update_giftList/:id\",\n      render: props => {\n        const id = props.match.params.id; // console.log(`id=${id}`)\n        // const currentGiftList = this.state.giftLists.find(gl => {\n        //   return gl.id === parseInt(id)\n        // })\n\n        return React.createElement(UpdateGiftListForm, {\n          giftLists: this.state.giftLists,\n          giftListId: id,\n          giftListFormData: this.state.giftListFormData,\n          updateGiftList: this.updateGiftList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/create_gift\",\n      render: () => React.createElement(CreateGiftForm, {\n        createGiftList: this.createGiftList,\n        handleChange: this.handleChange // currentUser={currentUser}\n        ,\n        giftFormData: this.state.giftFormData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/bengrzybowski/sei/week8/project3/client/src/App.js"],"names":["React","getData","Header","Footer","Route","withRouter","Home","RegisterForm","LoginForm","GiftListDetails","CreateGiftListForm","UpdateGiftListForm","registerUser","loginUser","verifyUser","getGiftListsByUser","postGiftList","putGiftList","deleteGiftList","App","Component","state","currentUser","authErrorMessage","giftLists","giftListFormData","title","description","image_link","due_date","giftFormData","item","price","location","proposed_purchase_date","actual_purchase_date","handleLogin","loginData","error","setState","getGiftLists","props","history","push","handleRegister","registerData","handleLogout","localStorage","removeItem","handleVerify","id","handleChange","e","target","name","value","prevState","createGiftList","userId","newGiftLists","updateGiftList","giftlist","ret","filter","giftList","createGift","componentDidMount","console","log","render","match","params","currentGiftList","find","gl","parseInt"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { getData } from './services/api-helper';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport { Route, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport RegisterForm from './components/RegisterForm';\nimport LoginForm from './components/LoginForm';\nimport GiftListDetails from './components/GiftListDetails';\nimport CreateGiftListForm from './components/CreateGiftListForm';\nimport UpdateGiftListForm from './components/UpdateGiftListForm';\nimport { registerUser, loginUser, verifyUser, getGiftListsByUser, postGiftList, putGiftList, deleteGiftList } from './services/api-helper';\n\nclass App extends React.Component {\n  state = {\n    currentUser: null,\n    authErrorMessage: \"\",\n    giftLists: [],\n    giftListFormData: {\n      title: \"\",\n      description: \"\",\n      image_link: \"\",\n      due_date: \"\"\n    },\n    giftFormData: {\n      item: \"\",\n      description: \"\",\n      image_link: \"\",\n      price: \"\",\n      location: \"\",\n      proposed_purchase_date: \"\",\n      actual_purchase_date: \"\"\n    }\n  }\n\n\n  handleLogin = async (loginData) => {\n    const currentUser = await loginUser(loginData);\n    if (currentUser.error) {\n      this.setState({ authErrorMessage: currentUser.error });\n    }\n    else {\n      this.setState({ currentUser });\n      await this.getGiftLists();\n      this.props.history.push('./');\n    }\n  }\n  handleRegister = async (registerData) => {\n    const currentUser = await registerUser(registerData);\n    if (currentUser.error) {\n      this.setState({ authErrorMessage: currentUser.error });\n    }\n    else {\n      this.setState({ currentUser });\n      this.props.history.push('./');\n    }\n  }\n  handleLogout = () => {\n    this.setState({ currentUser: null });\n    localStorage.removeItem('authToken');\n    this.setState({\n      currentUser: null,\n      authErrorMessage: \"\",\n      giftLists: []\n    });\n  }\n  handleVerify = async () => {\n    const currentUser = await verifyUser();\n    if (currentUser)\n      this.setState({ currentUser });\n  }\n  getGiftLists = async () => {\n    if (this.state.currentUser) {\n      const giftLists = await getGiftListsByUser(this.state.currentUser.id);\n      this.setState({ giftLists })\n    }\n    else {\n      this.setState({ giftLists: [] })\n    }\n  }\n  ///////Handle Change /////////\n  handleChange = (e) => {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      giftListFormData: {\n        ...prevState.giftListFormData,\n        [name]: value\n      }\n    }))\n  }\n  ///////////////////////////\n\n  /// Create Gift List /////////////\n  createGiftList = async (userId) => {\n    const newGiftLists = await postGiftList(userId, this.state.giftListFormData);\n    this.setState(prevState => ({\n      giftLists: [...prevState.giftLists, newGiftLists]\n    }))\n    this.props.history.push('./')\n  }\n  /////////////////////////////////\n  updateGiftList = async (id, giftlist) => {\n    const newGiftLists = await putGiftList(id, giftlist);\n    this.setState(prevState => ({\n      giftLists: [...prevState.giftLists, newGiftLists]\n    }))\n    this.props.history.push('../')\n  }\n  deleteGiftList = async (id) => {\n    const ret = await deleteGiftList(id);\n    this.setState(prevState => ({\n      giftLists: prevState.giftLists.filter(giftList => {\n        return giftList.id !== id\n      })\n    }))\n    this.props.history.push('../')\n  }\n  /// Create Gift /////////////\n  createGift = async (userId) => {\n    const newGiftLists = await postGiftList(userId, this.state.giftListFormData);\n    this.setState(prevState => ({\n      giftLists: [...prevState.giftLists, newGiftLists]\n    }))\n    this.props.history.push('./')\n  }\n  componentDidMount = async () => {\n    console.log(\"component did mount ran.\");\n    await this.handleVerify();\n    await this.getGiftLists();\n  }\n\n  render() {\n    const { currentUser } = this.state;\n    return (\n      <div className=\"app\" >\n        <Header\n          currentUser={currentUser}\n          handleLogout={this.handleLogout}\n        />\n\n        <Route exact path=\"/\" render={() => (\n          <Home\n            giftLists={this.state.giftLists}\n          />)} />\n\n        <Route path=\"/login\" render={() => (\n          <LoginForm\n            handleLogin={this.handleLogin}\n            authErrorMessage={this.state.authErrorMessage}\n          />\n        )} />\n\n        <Route path=\"/register\" render={() => (\n          <RegisterForm\n            handleRegister={this.handleRegister}\n            authErrorMessage={this.state.authErrorMessage}\n          />\n        )} />\n        <Route exact path='/giftLists/:id' render={(props) => {\n          const id = props.match.params.id;\n          const currentGiftList = this.state.giftLists.find(gl => {\n            return gl.id === parseInt(id)\n          })\n          return <GiftListDetails\n            currentGiftList={currentGiftList}\n            deleteGiftList={this.deleteGiftList}\n          />\n        }} />\n        <Route path='/create_giftLists' render={() => (\n          <CreateGiftListForm\n            createGiftList={this.createGiftList}\n            handleChange={this.handleChange}\n            currentUser={currentUser}\n            giftListFormData={this.state.giftListFormData}\n          />\n        )} />\n        <Route exact path='/update_giftList/:id' render={(props) => {\n          const id = props.match.params.id;\n          // console.log(`id=${id}`)\n          // const currentGiftList = this.state.giftLists.find(gl => {\n          //   return gl.id === parseInt(id)\n          // })\n          return <UpdateGiftListForm\n            giftLists={this.state.giftLists}\n            giftListId={id}\n            giftListFormData={this.state.giftListFormData}\n            updateGiftList={this.updateGiftList}\n          />\n        }} />\n        <Route path='/create_gift' render={() => (\n          <CreateGiftForm\n            createGiftList={this.createGiftList}\n            handleChange={this.handleChange}\n            // currentUser={currentUser}\n            giftFormData={this.state.giftFormData}\n          />\n        )} />\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}