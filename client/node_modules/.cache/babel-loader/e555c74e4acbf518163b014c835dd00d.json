{"ast":null,"code":"import _defineProperty from \"/Users/bengrzybowski/sei/week8/project3/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/bengrzybowski/sei/week8/project3/client/src/components/GiftListDetails.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport CreateGiftForm from './CreateGiftForm';\nimport UpdateGiftForm from './UpdateGiftForm';\nimport { getGiftsByGiftList, postGift, putGift, deleteGift } from '../services/api-helper';\nimport { Link, Route, withRouter } from 'react-router-dom';\nimport giftIcon from '../gift.png';\nimport editIcon from '../edit.png';\nimport deleteIcon from '../delete.png';\nimport moment from 'moment';\nimport GiftDetails from './GiftDetails';\nimport { timingSafeEqual } from 'crypto';\n\nclass GiftListDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      gifts: [],\n      updateGifts: [],\n      giftFormData: {\n        item: \"\",\n        description: \"\",\n        image_link: \"\",\n        price: \"\",\n        location: \"\",\n        proposed_purchase_date: \"\",\n        actual_purchase_date: \"\"\n      },\n      show: false,\n      showUpdate: false,\n      showGiftDet: false,\n      selectedGift: 0\n    };\n\n    this.showModal = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.showModalUpdate = id => {\n      console.log(\"showModalUpdate id=\".concat(id));\n      timingSafeEqual.setState({\n        updateGifts: gifts.filter(gift)\n      });\n      this.setState({\n        showUpdate: true,\n        selectedGift: id\n      });\n      console.log(\"showModalUpdate selectedGift=\".concat(this.state.selectedGift));\n    };\n\n    this.hideModalUpdate = () => {\n      this.setState({\n        showUpdate: false\n      });\n    };\n\n    this.showGiftDetails = id => {\n      console.log(\"showGiftDetails id=\".concat(id));\n      this.setState({\n        showGiftDet: true,\n        selectedGift: id\n      });\n      console.log(\"showGiftDetails selectedGift=\".concat(this.state.selectedGift));\n    };\n\n    this.hideGiftDetails = () => {\n      this.setState({\n        showGiftDet: false\n      });\n    };\n\n    this.getGifts = async () => {\n      if (this.props.currentGiftList) {\n        const gifts = await getGiftsByGiftList(this.props.currentGiftList.id);\n        this.setState({\n          gifts\n        });\n      } else {\n        this.setState({\n          gifts: []\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      this.setState(prevState => ({\n        giftFormData: _objectSpread({}, prevState.giftFormData, {\n          [name]: value\n        })\n      }));\n    };\n\n    this.createGift = async () => {\n      const newGift = await postGift(this.props.currentGiftList.id, this.state.giftFormData);\n      this.setState(prevState => ({\n        gifts: [...prevState.gifts, newGift]\n      }));\n    };\n\n    this.updateGift = async (id, data) => {\n      const newGift = await putGift(id, data);\n      this.setState(prevState => ({\n        gifts: prevState.gifts.map(gift => gift.id === parseInt(id) ? newGift : gift)\n      }));\n    };\n\n    this.deleteGiftL = async id => {\n      await deleteGift(id);\n      this.setState(prevState => ({\n        gifts: prevState.gifts.filter(gift => {\n          return gift.id !== id;\n        })\n      }));\n    };\n  }\n\n  async componentDidMount() {\n    await this.getGifts();\n  }\n\n  render() {\n    const currentGiftList = this.props.currentGiftList;\n    const gifts = this.state.gifts;\n    return React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, currentGiftList ? React.createElement(\"div\", {\n      id: \"gift-list-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"giftlist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, currentGiftList.title), React.createElement(\"img\", {\n      className: \"giftlist-image\",\n      src: currentGiftList.image_link,\n      alt: \"giftlistimage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, currentGiftList.description), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Due Date: \", moment(new Date(currentGiftList.due_date)).format(\"MM/DD/YYYY\")), React.createElement(CreateGiftForm, {\n      show: this.state.show,\n      handleClose: this.hideModal,\n      createGift: this.createGift,\n      handleChange: this.handleChange,\n      giftFormData: this.state.giftFormData,\n      currentGiftList: currentGiftList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"action-image\",\n      src: giftIcon,\n      alt: \"add\",\n      onClick: this.showModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/update_giftList/\".concat(currentGiftList.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"action-image\",\n      src: editIcon,\n      alt: \"edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })), React.createElement(\"img\", {\n      className: \"action-image\",\n      src: deleteIcon,\n      alt: \"delete\",\n      onClick: () => {\n        this.props.deleteGiftList(currentGiftList.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      id: \"gifts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, gifts.map(gift => React.createElement(\"div\", {\n      className: \"gift\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"gift-image\",\n      src: gift.image_link,\n      alt: \"noimage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(GiftDetails, {\n      gifts: gifts,\n      selectedGift: this.state.selectedGift,\n      show: this.state.showGiftDet,\n      handleClose: this.hideGiftDetails,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, gift.item), React.createElement(\"div\", {\n      id: \"gift-button-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => this.showModalUpdate(gift.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Update Gift\"), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => this.showGiftDetails(gift.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"View Gift\"), React.createElement(UpdateGiftForm, {\n      gifts: gifts // giftId={gift.id}\n      // selectedGift={this.state.selectedGift}\n      ,\n      giftId: this.state.selectedGift,\n      show: this.state.showUpdate,\n      handleClose: this.hideModalUpdate,\n      updateGift: this.updateGift,\n      giftFormData: this.state.giftFormData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => {\n        this.deleteGiftL(gift.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Delete Gift\")))))) : React.createElement(React.Fragment, null));\n  }\n\n}\n\nexport default withRouter(GiftListDetails);","map":{"version":3,"sources":["/Users/bengrzybowski/sei/week8/project3/client/src/components/GiftListDetails.jsx"],"names":["React","CreateGiftForm","UpdateGiftForm","getGiftsByGiftList","postGift","putGift","deleteGift","Link","Route","withRouter","giftIcon","editIcon","deleteIcon","moment","GiftDetails","timingSafeEqual","GiftListDetails","Component","state","gifts","updateGifts","giftFormData","item","description","image_link","price","location","proposed_purchase_date","actual_purchase_date","show","showUpdate","showGiftDet","selectedGift","showModal","setState","hideModal","showModalUpdate","id","console","log","filter","gift","hideModalUpdate","showGiftDetails","hideGiftDetails","getGifts","props","currentGiftList","handleChange","e","target","name","value","prevState","createGift","newGift","updateGift","data","map","parseInt","deleteGiftL","componentDidMount","render","title","Date","due_date","format","deleteGiftList"],"mappings":"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","sourcesContent":["import React from 'react'\nimport CreateGiftForm from './CreateGiftForm';\nimport UpdateGiftForm from './UpdateGiftForm';\nimport { getGiftsByGiftList, postGift, putGift, deleteGift } from '../services/api-helper';\nimport { Link, Route, withRouter } from 'react-router-dom';\nimport giftIcon from '../gift.png';\nimport editIcon from '../edit.png';\nimport deleteIcon from '../delete.png';\nimport moment from 'moment'\nimport GiftDetails from './GiftDetails';\nimport { timingSafeEqual } from 'crypto';\n\nclass GiftListDetails extends React.Component {\n  state = {\n    gifts: [],\n    updateGifts: [],\n    giftFormData: {\n      item: \"\",\n      description: \"\",\n      image_link: \"\",\n      price: \"\",\n      location: \"\",\n      proposed_purchase_date: \"\",\n      actual_purchase_date: \"\"\n    },\n    show: false,\n    showUpdate: false,\n    showGiftDet: false,\n    selectedGift: 0\n  }\n  showModal = () => {\n    this.setState({ show: true });\n  };\n\n  hideModal = () => {\n    this.setState({ show: false });\n  };\n  showModalUpdate = (id) => {\n    console.log(`showModalUpdate id=${id}`)\n    timingSafeEqual.setState({updateGifts:gifts.filter(gift)})\n    this.setState({ showUpdate: true, selectedGift: id });\n    console.log(`showModalUpdate selectedGift=${this.state.selectedGift}`)\n  };\n\n  hideModalUpdate = () => {\n    this.setState({ showUpdate: false });\n  };\n  showGiftDetails = (id) => {\n    console.log(`showGiftDetails id=${id}`)\n    this.setState({ showGiftDet: true, selectedGift: id });\n    console.log(`showGiftDetails selectedGift=${this.state.selectedGift}`)\n  };\n\n  hideGiftDetails = () => {\n    this.setState({ showGiftDet: false });\n  };\n  async componentDidMount() {\n    await this.getGifts();\n  }\n\n  getGifts = async () => {\n    if (this.props.currentGiftList) {\n      const gifts = await getGiftsByGiftList(this.props.currentGiftList.id);\n      this.setState({ gifts })\n    }\n    else {\n      this.setState({ gifts: [] })\n    }\n  }\n  ///////Handle Change /////////\n  handleChange = (e) => {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      giftFormData: {\n        ...prevState.giftFormData,\n        [name]: value\n      }\n    }))\n  }\n  // /// Create Gift /////////////\n  createGift = async () => {\n    const newGift = await postGift(this.props.currentGiftList.id, this.state.giftFormData);\n    this.setState(prevState => ({\n      gifts: [...prevState.gifts, newGift]\n    }))\n  }\n  // /// Update Gift /////////////\n  updateGift = async (id, data) => {\n    const newGift = await putGift(id, data);\n    this.setState(prevState => ({\n      gifts: prevState.gifts.map(gift =>\n        gift.id === parseInt(id) ? newGift : gift)\n    }))\n  }\n  deleteGiftL = async (id) => {\n    await deleteGift(id);\n    this.setState(prevState => ({\n      gifts: prevState.gifts.filter(gift => {\n        return gift.id !== id\n      })\n    }))\n  }\n\n  render() {\n    const { currentGiftList } = this.props;\n    const { gifts } = this.state;\n\n    return (\n      <div className=\"main\">\n        {currentGiftList ?\n          <div id=\"gift-list-details\">\n            <div id=\"giftlist\">\n              <h2>{currentGiftList.title}</h2>\n              <img className=\"giftlist-image\" src={currentGiftList.image_link} alt=\"giftlistimage\" />\n              <div>\n                <p>{currentGiftList.description}</p>\n\n                <h4>Due Date: {moment(new Date(currentGiftList.due_date)).format(\"MM/DD/YYYY\")}</h4>\n                <CreateGiftForm\n                  show={this.state.show}\n                  handleClose={this.hideModal}\n                  createGift={this.createGift}\n                  handleChange={this.handleChange}\n                  giftFormData={this.state.giftFormData}\n                  currentGiftList={currentGiftList}\n                />\n                <img className=\"action-image\" src={giftIcon} alt=\"add\" onClick={this.showModal} />\n                <Link to={`/update_giftList/${currentGiftList.id}`}>\n                  <img className=\"action-image\" src={editIcon} alt=\"edit\" />\n                </Link>\n                <img className=\"action-image\" src={deleteIcon} alt=\"delete\" onClick={() => {\n                  this.props.deleteGiftList(currentGiftList.id)\n                }} />\n              </div>\n            </div>\n            <div id=\"gifts\">\n              {\n                gifts.map(gift => (\n                  <div className=\"gift\">\n                    <img className=\"gift-image\" src={gift.image_link} alt='noimage' />\n                    <GiftDetails\n                      gifts={gifts}\n                      selectedGift={this.state.selectedGift}\n                      show={this.state.showGiftDet}\n                      handleClose={this.hideGiftDetails}\n                    />\n                    <h2>{gift.item}</h2>\n                    <div id=\"gift-button-group\">\n                      <button type=\"button\" onClick={() => this.showModalUpdate(gift.id)}>Update Gift</button>\n                      <button type=\"button\" onClick={() => this.showGiftDetails(gift.id)}>View Gift</button>\n                      <UpdateGiftForm\n                        gifts={gifts}\n                        // giftId={gift.id}\n                        // selectedGift={this.state.selectedGift}\n                        giftId={this.state.selectedGift}\n                        show={this.state.showUpdate}\n                        handleClose={this.hideModalUpdate}\n                        updateGift={this.updateGift}\n                        giftFormData={this.state.giftFormData}\n                      />\n                      <button\n                        onClick={() => { this.deleteGiftL(gift.id) }}>Delete Gift\n                    </button>\n                    </div>\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n          : <></>}\n      </div>\n    )\n  }\n} export default withRouter(GiftListDetails);"]},"metadata":{},"sourceType":"module"}