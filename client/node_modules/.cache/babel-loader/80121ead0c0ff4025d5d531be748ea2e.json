{"ast":null,"code":"import _defineProperty from \"/Users/bengrzybowski/sei/week8/project3/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/bengrzybowski/sei/week8/project3/client/src/components/GiftListDetails.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport CreateGiftForm from './CreateGiftForm';\nimport UpdateGiftForm from './UpdateGiftForm';\nimport { getGiftsByGiftList, postGift, putGift, deleteGift } from '../services/api-helper';\nimport { Link, Route, withRouter } from 'react-router-dom';\nimport giftIcon from '../gift.png';\nimport editIcon from '../edit.png';\nimport deleteIcon from '../delete.png';\nimport moment from 'moment';\nimport GiftDetails from './GiftDetails';\n\nclass GiftListDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      gifts: [],\n      giftFormData: {\n        item: \"\",\n        description: \"\",\n        image_link: \"\",\n        price: \"\",\n        location: \"\",\n        proposed_purchase_date: \"\",\n        actual_purchase_date: \"\"\n      },\n      show: false,\n      showUpdate: false,\n      showGiftDet: false,\n      selectedGift: 0\n    };\n\n    this.showModal = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.showModalUpdate = id => {\n      this.setState({\n        showUpdate: true,\n        selectedGift: id\n      });\n    };\n\n    this.hideModalUpdate = () => {\n      this.setState({\n        showUpdate: false,\n        selectedGift: 0\n      });\n    };\n\n    this.showGiftDetails = id => {\n      this.setState({\n        showGiftDet: true,\n        selectedGift: id\n      });\n    };\n\n    this.hideGiftDetails = () => {\n      this.setState({\n        showGiftDet: false,\n        selectedGift: 0\n      });\n    };\n\n    this.getGifts = async () => {\n      if (this.props.currentGiftList) {\n        const gifts = await getGiftsByGiftList(this.props.currentGiftList.id);\n        this.setState({\n          gifts\n        });\n      } else {\n        this.setState({\n          gifts: []\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      this.setState(prevState => ({\n        giftFormData: _objectSpread({}, prevState.giftFormData, {\n          [name]: value\n        })\n      }));\n    };\n\n    this.createGift = async () => {\n      const newGift = await postGift(this.props.currentGiftList.id, this.state.giftFormData);\n      this.setState(prevState => ({\n        gifts: [...prevState.gifts, newGift]\n      }));\n    };\n\n    this.updateGift = async (id, data) => {\n      const newGift = await putGift(id, data);\n      this.setState(prevState => ({\n        gifts: prevState.gifts.map(gift => gift.id === parseInt(id) ? newGift : gift)\n      }));\n    };\n\n    this.deleteGiftL = async id => {\n      await deleteGift(id);\n      this.setState(prevState => ({\n        gifts: prevState.gifts.filter(gift => {\n          return gift.id !== id;\n        })\n      }));\n    };\n  }\n\n  async componentDidMount() {\n    await this.getGifts();\n  }\n\n  render() {\n    const currentGiftList = this.props.currentGiftList;\n    const gifts = this.state.gifts;\n    return React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, currentGiftList ? React.createElement(\"div\", {\n      id: \"gift-list-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"giftlist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, currentGiftList.title), React.createElement(\"img\", {\n      className: \"giftlist-image\",\n      src: currentGiftList.image_link,\n      alt: \"giftlistimage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, currentGiftList.description), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Due Date: \", moment(new Date(currentGiftList.due_date)).format(\"MM/DD/YYYY\")), React.createElement(CreateGiftForm, {\n      show: this.state.show,\n      handleClose: this.hideModal,\n      createGift: this.createGift,\n      handleChange: this.handleChange,\n      giftFormData: this.state.giftFormData,\n      currentGiftList: currentGiftList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"action-image\",\n      src: giftIcon,\n      alt: \"add\",\n      onClick: this.showModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/update_giftList/\".concat(currentGiftList.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"action-image\",\n      src: editIcon,\n      alt: \"edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(\"img\", {\n      className: \"action-image\",\n      src: deleteIcon,\n      alt: \"delete\",\n      onClick: () => {\n        this.props.deleteGiftList(currentGiftList.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      id: \"gifts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, gifts.map(gift => React.createElement(\"div\", {\n      className: \"gift\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"gift-image\",\n      src: gift.image_link,\n      alt: \"noimage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(GiftDetails, {\n      gifts: gifts,\n      selectedGift: this.state.selectedGift,\n      show: this.state.showGiftDet,\n      handleClose: this.hideGiftDetails,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, gift.item), React.createElement(\"div\", {\n      id: \"gift-button-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: gift.id,\n      type: \"button\",\n      onClick: () => this.showModalUpdate(gift.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Update Gift\"), React.createElement(\"button\", {\n      id: gift.id,\n      type: \"button\",\n      onClick: () => this.showGiftDetails(gift.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"View Gift\"), React.createElement(UpdateGiftForm, {\n      gifts: gifts // giftId={gift.id}\n      ,\n      selectedGift: this.state.selectedGift,\n      show: this.state.showUpdate,\n      handleClose: this.hideModalUpdate,\n      updateGift: this.updateGift,\n      giftFormData: this.state.giftFormData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => {\n        this.deleteGiftL(gift.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Delete Gift\")))))) : React.createElement(React.Fragment, null));\n  }\n\n}\n\nexport default withRouter(GiftListDetails);","map":{"version":3,"sources":["/Users/bengrzybowski/sei/week8/project3/client/src/components/GiftListDetails.jsx"],"names":["React","CreateGiftForm","UpdateGiftForm","getGiftsByGiftList","postGift","putGift","deleteGift","Link","Route","withRouter","giftIcon","editIcon","deleteIcon","moment","GiftDetails","GiftListDetails","Component","state","gifts","giftFormData","item","description","image_link","price","location","proposed_purchase_date","actual_purchase_date","show","showUpdate","showGiftDet","selectedGift","showModal","setState","hideModal","showModalUpdate","id","hideModalUpdate","showGiftDetails","hideGiftDetails","getGifts","props","currentGiftList","handleChange","e","target","name","value","prevState","createGift","newGift","updateGift","data","map","gift","parseInt","deleteGiftL","filter","componentDidMount","render","title","Date","due_date","format","deleteGiftList"],"mappings":"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","sourcesContent":["import React from 'react'\nimport CreateGiftForm from './CreateGiftForm';\nimport UpdateGiftForm from './UpdateGiftForm';\nimport { getGiftsByGiftList, postGift, putGift, deleteGift } from '../services/api-helper';\nimport { Link, Route, withRouter } from 'react-router-dom';\nimport giftIcon from '../gift.png';\nimport editIcon from '../edit.png';\nimport deleteIcon from '../delete.png';\nimport moment from 'moment'\nimport GiftDetails from './GiftDetails';\n\nclass GiftListDetails extends React.Component {\n  state = {\n    gifts: [],\n    giftFormData: {\n      item: \"\",\n      description: \"\",\n      image_link: \"\",\n      price: \"\",\n      location: \"\",\n      proposed_purchase_date: \"\",\n      actual_purchase_date: \"\"\n    },\n    show: false,\n    showUpdate: false,\n    showGiftDet: false,\n    selectedGift: 0\n  }\n  showModal = () => {\n    this.setState({ show: true });\n  };\n\n  hideModal = () => {\n    this.setState({ show: false });\n  };\n  showModalUpdate = (id) => {\n\n    this.setState({ showUpdate: true, selectedGift: id });\n  };\n\n  hideModalUpdate = () => {\n    this.setState({ showUpdate: false, selectedGift: 0 });\n  };\n  showGiftDetails = (id) => {\n    this.setState({ showGiftDet: true, selectedGift: id });\n  };\n\n  hideGiftDetails = () => {\n    this.setState({ showGiftDet: false, selectedGift: 0 });\n  };\n  async componentDidMount() {\n    await this.getGifts();\n  }\n\n  getGifts = async () => {\n    if (this.props.currentGiftList) {\n      const gifts = await getGiftsByGiftList(this.props.currentGiftList.id);\n      this.setState({ gifts })\n    }\n    else {\n      this.setState({ gifts: [] })\n    }\n  }\n  ///////Handle Change /////////\n  handleChange = (e) => {\n    const { name, value } = e.target;\n    this.setState(prevState => ({\n      giftFormData: {\n        ...prevState.giftFormData,\n        [name]: value\n      }\n    }))\n  }\n  // /// Create Gift /////////////\n  createGift = async () => {\n    const newGift = await postGift(this.props.currentGiftList.id, this.state.giftFormData);\n    this.setState(prevState => ({\n      gifts: [...prevState.gifts, newGift]\n    }))\n  }\n  // /// Update Gift /////////////\n  updateGift = async (id, data) => {\n    const newGift = await putGift(id, data);\n    this.setState(prevState => ({\n      gifts: prevState.gifts.map(gift =>\n        gift.id === parseInt(id) ? newGift : gift)\n    }))\n  }\n  deleteGiftL = async (id) => {\n    await deleteGift(id);\n    this.setState(prevState => ({\n      gifts: prevState.gifts.filter(gift => {\n        return gift.id !== id\n      })\n    }))\n  }\n\n  render() {\n    const { currentGiftList } = this.props;\n    const { gifts } = this.state;\n\n    return (\n      <div className=\"main\">\n        {currentGiftList ?\n          <div id=\"gift-list-details\">\n            <div id=\"giftlist\">\n              <h2>{currentGiftList.title}</h2>\n              <img className=\"giftlist-image\" src={currentGiftList.image_link} alt=\"giftlistimage\" />\n              <div>\n                <p>{currentGiftList.description}</p>\n\n                <h4>Due Date: {moment(new Date(currentGiftList.due_date)).format(\"MM/DD/YYYY\")}</h4>\n                <CreateGiftForm\n                  show={this.state.show}\n                  handleClose={this.hideModal}\n                  createGift={this.createGift}\n                  handleChange={this.handleChange}\n                  giftFormData={this.state.giftFormData}\n                  currentGiftList={currentGiftList}\n                />\n                <img className=\"action-image\" src={giftIcon} alt=\"add\" onClick={this.showModal} />\n                <Link to={`/update_giftList/${currentGiftList.id}`}>\n                  <img className=\"action-image\" src={editIcon} alt=\"edit\" />\n                </Link>\n                <img className=\"action-image\" src={deleteIcon} alt=\"delete\" onClick={() => {\n                  this.props.deleteGiftList(currentGiftList.id)\n                }} />\n              </div>\n            </div>\n            <div id=\"gifts\">\n              {\n                gifts.map(gift => (\n                  <div className=\"gift\">\n                    <img className=\"gift-image\" src={gift.image_link} alt='noimage' />\n                    <GiftDetails\n                      gifts={gifts}\n                      selectedGift={this.state.selectedGift}\n                      show={this.state.showGiftDet}\n                      handleClose={this.hideGiftDetails}\n                    />\n                    <h2>{gift.item}</h2>\n                    <div id=\"gift-button-group\">\n                      <button id={gift.id} type=\"button\" onClick={() => this.showModalUpdate(gift.id)}>Update Gift</button>\n                      <button id={gift.id} type=\"button\" onClick={() => this.showGiftDetails(gift.id)}>View Gift</button>\n                      <UpdateGiftForm\n                        gifts={gifts}\n                        // giftId={gift.id}\n                        selectedGift={this.state.selectedGift}\n                        show={this.state.showUpdate}\n                        handleClose={this.hideModalUpdate}\n                        updateGift={this.updateGift}\n                        giftFormData={this.state.giftFormData}\n                      />\n                      <button\n                        onClick={() => { this.deleteGiftL(gift.id) }}>Delete Gift\n                    </button>\n                    </div>\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n          : <></>}\n      </div>\n    )\n  }\n} export default withRouter(GiftListDetails);"]},"metadata":{},"sourceType":"module"}